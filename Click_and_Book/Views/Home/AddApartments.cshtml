@{
    ViewBag.Title = "AddApartments";
}

<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<link href="https://fonts.googleapis.com/css?family=Cabin:400,700" rel="stylesheet">
<link type="text/css" rel="stylesheet" href="~/css/bootstrap.min.css" />
<link type="text/css" rel="stylesheet" href="~/css/style-form.css" />
<script type="text/javascript">


    $(document).ready(function () {
        LoadRoomDetails();
        $("#btnSave").click(function () {
            SaveRoomData();
        });
    });
    function LoadRoomDetails() {
        //$("#divLoadRoomDetails)
        $.ajax({
            async: true,
            data: 'GET',
            dataType: 'HTML',
            contentType: false,
            processData: false,
            url: '/Rooms/GetAllRooms',
            success: function (data) {
                $("#divLoadRoomDetails").html(data);
            },
            error: function () {
                alert('There is problem processing your request.');
            }
        });
    }
    //Spremanje podataka
    function SaveRoomData() {
        var formData = new FormData;
        formData.append("RoomNumber", $("#txtRoomNumber").val());
        formData.append("RoomPrice", $("#txtRoomPrice").val());
        formData.append("BookingStatusId", $("#ddBookingStatus").val());
        formData.append("RoomTypeId", $("#ddRoomType").val());
        formData.append("RoomCapacity", $("#txtRoomCapacity").val());
        formData.append("RoomDescription", $("#txtRoomDescription").val());
        formData.append("Image", $("#UpLoadImage").get(0).files[0]);
        //Sinkroni(false) ili Asinkroni(true) poziv
        $.ajax({
            async: true,
            type: 'POST',
            contentType: false,
            processData: false,
            data: formData,
            success: function (data) {
                //Ako su uspjesno poslani podatci i Reset funk. (povezano s Json-RoomController)
                if (data.success === true) {
                    alert(data.message);
                    ResetRoomInformation()
                }
            },
            error: function () {
                alert('There is a problem processing your request');
            }
        });
    }
    function ResetRoomInformation() {
        $("#txtRoomNumber").val('');
        $("#txtRoomPrice").val('');
        $("#ddBookingStatus").val(1);
        $("#ddRoomType").val(1);
        $("#txtRoomCapacity").val('');
        $("#txtRoomDescription").val('');
        $("#UpLoadImage").val('');
        $("#txtRoomNumber").focus();
        $("#imgRoom").removeAttr('src');
    }
    //Prikaz Slike
    function DisplayImage(result) {
        if (result.files && result.files[0]) {
            var fileReader = new FileReader();
            fileReader.onload = function (e) {
                $("#imgRoom").attr('src', e.target.result);
            }
            fileReader.readAsDataURL(result.files[0]);
        }
    }
</script>
<p>Admin</p>
<div style="margin-top: 50px">
    <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#divAddRoom" data-backdrop="static" data-keyboard="false">Add Apartment</button>
</div>
<p style="margin-top: 50px">Customer</p>
<div style="margin-top: 50px">

    <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#divChooseRoom" data-backdrop="static" data-keyboard="false">Choose Apartment</button>

</div>


<div id="booking" class=" modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title"></h4>
            </div>
            
                
                            <div class="row">
                                <div class="booking-form">
                                    <div class="booking-bg"></div>
                                    <form>
                                        <div class="form-header">
                                            <h2>Make your reservation</h2>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <span class="form-label">Check In</span>
                                                    <input class="form-control" type="date" required>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <span class="form-label">Check Out</span>
                                                    <input class="form-control" type="date" required>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <span class="form-label">Adults</span>
                                                    <select class="form-control">
                                                        <option>0</option>
                                                        <option>1</option>
                                                        <option>2</option>
                                                        <option>3</option>
                                                        <option>4</option>
                                                        <option>5</option>
                                                    </select>
                                                    <span class="select-arrow"></span>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <span class="form-label">Children</span>
                                                    <select class="form-control">
                                                        <option>0</option>
                                                        <option>1</option>
                                                        <option>2</option>
                                                        <option>3</option>
                                                        <option>4</option>
                                                        <option>5</option>
                                                    </select>
                                                    <span class="select-arrow"></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <span class="form-label">First and Last Name</span>
                                            <input class="form-control" type="email" placeholder="example Marko Marković ...">
                                        </div>
                                        <div class="form-group">
                                            <span class="form-label">Email</span>
                                            <input class="form-control" type="email" placeholder="name@domain">
                                        </div>
                                        <div class="form-group">
                                            <span class="form-label">Phone</span>
                                            <input class="form-control" type="tel" placeholder="+385 111 111 ...">
                                        </div>
                                        <div class="form-btn">
                                            <button class="submit-btn">Book Now</button>
                                        </div>
                                        <div class="modal-footer">
                                            
                                            <button type="button" data-dismiss="modal" class="btn btn-danger">Close</button>


                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div id="divAddRoom" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title"></h4>
                            </div>
                            <div class="modal-body">
                                <div class="container">
                                    <div class="booking-form">
                                        <div class="booking-bg"></div>
                                        <form>
                                            <div class="form-header">
                                                <h2>Post Apartment</h2>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <span class="form-label">Available from</span>
                                                        <input class="form-control" type="date" required>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <span class="form-label">To Date</span>
                                                        <input class="form-control" type="date" required>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <span class="form-label">Adults</span>
                                                        <select class="form-control">
                                                            <option>0</option>
                                                            <option>1</option>
                                                            <option>2</option>
                                                            <option>3</option>
                                                            <option>4</option>
                                                            <option>5</option>
                                                        </select>
                                                        <span class="select-arrow"></span>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <span class="form-label">Children</span>
                                                        <select class="form-control">
                                                            <option>0</option>
                                                            <option>1</option>
                                                            <option>2</option>
                                                            <option>3</option>
                                                            <option>4</option>
                                                            <option>5</option>
                                                        </select>
                                                        <span class="select-arrow"></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <span class="form-label">First and Last Name</span>
                                                <input class="form-control" type="email" placeholder="example Marko Marković ...">
                                            </div>
                                            <div class="form-group">
                                                <span class="form-label">Location of your Apartment</span>
                                                <input class="form-control" type="email" placeholder="example Marko Marković ...">
                                            </div>
                                            <div class="form-group">
                                                <span class="form-label">Email</span>
                                                <input class="form-control" type="email" placeholder="name@domain">
                                            </div>
                                            <div class="form-group">
                                                <span class="form-label">Phone</span>
                                                <input class="form-control" type="tel" placeholder="+385 111 111 ...">
                                            </div>
                                            <div class="form-btn">
                                                <button class="submit-btn">Book Now</button>
                                            </div>
                                           
                                        </form>
                                    </div>
                                  

                                    <div class="form-group">

                                        <input id="UpLoadImage" type="file" class="form-control" name="roomImage" title="Load Image" onchange="DisplayImage(this)" />
                                        <img id="imgRoom" height="200" width="280" style="border:solid" />
                                    </div>

                                </div>

                            </div>
                            <div class="modal-footer">
                                <button id="btnSave" type="button" class="btn btn-success">Save</button> &nbsp;
                                <button type="button" data-dismiss="modal" class="btn btn-danger">Close</button>


                            </div>

                        </div>
                    </div>
                </div>
                <div id="divChooseRoom" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">Room</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container">
                                    <div class="booking-form">
                                        <div class="booking-bg"></div>
                                        <form>
                                            <div class="form-header">
                                                <h2>Make your reservation</h2>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <span class="form-label">Check In</span>
                                                        <input class="form-control" type="date" required>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <span class="form-label">Check Out</span>
                                                        <input class="form-control" type="date" required>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <span class="form-label">Adults</span>
                                                        <select class="form-control">
                                                            <option>0</option>
                                                            <option>1</option>
                                                            <option>2</option>
                                                            <option>3</option>
                                                            <option>4</option>
                                                            <option>5</option>
                                                        </select>
                                                        <span class="select-arrow"></span>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <span class="form-label">Children</span>
                                                        <select class="form-control">
                                                            <option>0</option>
                                                            <option>1</option>
                                                            <option>2</option>
                                                            <option>3</option>
                                                            <option>4</option>
                                                            <option>5</option>
                                                        </select>
                                                        <span class="select-arrow"></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <span class="form-label">First and Last Name</span>
                                                <input class="form-control" type="email" placeholder="example Marko Marković ...">
                                            </div>
                                            <div class="form-group">
                                                <span class="form-label">Email</span>
                                                <input class="form-control" type="email" placeholder="name@domain">
                                            </div>
                                            <div class="form-group">
                                                <span class="form-label">Phone</span>
                                                <input class="form-control" type="tel" placeholder="+385 111 111 ...">
                                            </div>
                                            <div class="form-btn">
                                                <button class="submit-btn">Book Now</button>
                                            </div>
                                          
                                        </form>
                                    </div>

                                  

                                </div>

                            </div>
                            <div class="modal-footer">
                                <button id="btnSave" type="button" class="btn btn-success">Choose</button> &nbsp;
                                <button type="button" data-dismiss="modal" class="btn btn-danger">Close</button>


                            </div>

                        </div>
                    </div>
                </div>
                <div style="margin-top: 70px"></div>
                <div id="divLoadRoomDetails">

                </div>


